<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Split Textareas</title>
    <style>
      @font-face {
        font-family: "Cascadia Code";
        src: url(assets/CascadiaCode.ttf);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        background: #6e7682;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      textarea {
        background: #181818;
        color: #ce9178;
        padding: 16px;
        font: 16px "Cascadia Code";
        width: 100%;
        height: 50%;
        resize: none;
        font-size: 16px;
        outline: none;
        border: 0;
        box-sizing: border-box; /* Ensures padding stays */
        scrollbar-width: thin;
        scrollbar-color: #ce9178 #181818;
      }

      textarea:focus {
        outline: none;
      }

      .transactions {
        height: 15%;
        border-bottom: 0.5px solid #ce9178;
      }

      .output {
        height: 85%;
        border-top: 0.5x solid #ce9178;
      }

      .import:active {
        color: #ce9178;
      }
    </style>
  </head>
  <body>
    <textarea
      id="transactions-textarea"
      class="transactions"
      wrap="off"
      spellcheck="false"
      autofocus
      placeholder="Paste gold import transactions in CSV-format here including header.

  - Run import with F5
    - if no transactions are supplied, a sample will be used.

  - Decrease/increase size of transactions and output area with F10/F11."
    ></textarea>
    <textarea
      id="output-textarea"
      class="output"
      wrap="off"
      spellcheck="false"
      tabindex="-1"
      readonly
    ></textarea>
    <script>
      const { ipcRenderer } = require("electron");

      const changeSize = (increase) => {
        const transactions = document.getElementById("transactions-textarea");
        const output = document.getElementById("output-textarea");
        const container = document.body;

        let containerHeight = container.clientHeight;
        let topHeight = (transactions.clientHeight / containerHeight) * 100;

        let newTopHeight = increase
          ? Math.min(topHeight + 5, 85)
          : Math.max(topHeight - 5, 15);
        let newBottomHeight = 100 - newTopHeight;

        transactions.style.height = `${newTopHeight}%`;
        output.style.height = `${newBottomHeight}%`;
      };

      document.body.addEventListener("keydown", (e) => {
        if (e.key === "F5") {
          event.preventDefault();

          document.getElementById("output-textarea").value = "Importing...";
          const inputTextArea = document.getElementById(
            "transactions-textarea"
          );
          if (!inputTextArea.value) {
            inputTextArea.value = `metering_point_id;valid_from_date;valid_to_date;dh2_created;metering_grid_area_id;metering_point_state_id;btd_trans_doss_id;parent_metering_point_id;type_of_mp;sub_type_of_mp;physical_status_of_mp;web_access_code;balance_supplier_id;effectuation_date;transaction_type;meter_reading_occurrence;mp_connection_type;disconnection_type;product;product_obligation;energy_timeseries_measure_unit;asset_type;fuel_type;mp_capacity;power_limit_kw;power_limit_a;meter_number;net_settlement_group;scheduled_meter_reading_date01;from_grid_area;to_grid_area;power_plant_gsrn;settlement_method;location_street_code;location_street_name;location_building_number;location_city_name;location_city_subdivision_name;location_dar_reference;location_country_name;location_floor_id;location_room_id;location_postcode;location_municipality_code;location_location_description;first_consumer_party_name;first_consumer_cpr;second_consumer_party_name;second_consumer_cpr;consumer_cvr;protected_name;contact_1_contact_name1;contact_1_protected_address;contact_1_phone_number;contact_1_mobile_number;contact_1_email_address;contact_1_attention;contact_1_street_code;contact_1_street_name;contact_1_building_number;contact_1_postcode;contact_1_city_name;contact_1_city_subdivision_name;contact_1_dar_reference;contact_1_country_name;contact_1_floor_id;contact_1_room_id;contact_1_post_box;contact_1_municipality_code;contact_4_contact_name1;contact_4_protected_address;contact_4_phone_number;contact_4_mobile_number;contact_4_email_address;contact_4_attention;contact_4_street_code;contact_4_street_name;contact_4_building_number;contact_4_postcode;contact_4_city_name;contact_4_city_subdivision_name;contact_4_dar_reference;contact_4_country_name;contact_4_floor_id;contact_4_room_id;contact_4_post_box;contact_4_municipality_code;dossier_status
571313180401280327;2023-12-31T23:00:00.0000000+00:00;9999-12-31T23:59:59.9999999+00:00;2025-01-15T14:55:47.7830000+00:00;804;224111003;339748207;;E17;D01;E22;"WAC0029";"8100000000108";2023-12-31T23:00:00.0000000+00:00;"CREATEMP";"ANDET";;D02;8716867000030;;"KWH";;;;11;16;"00110048";0;0101;;;;E01;6595;Raccoon Alley;29;Raccoon City;;;DK;;;9999;607;;Anders And d. 29.;;Fætter Højben d. 29.;;;;Anders And d. 29.;;99990029;25698574;Kontaktmail@fiktiv.dk;;6595;Raccoon Alley;29;9999;Raccoon City;;;DK;;;;607;Anders And d. 29.;;99990001;99980001;Kontaktmail@fiktiv.dk;;6595;Raccoon Alley;29;9999;Raccoon City;;;DK;;;;607;
571313180401280327;2023-12-31T23:00:00.0000000+00:00;2025-02-13T23:00:00.0000000+00:00;2025-02-14T14:20:37.9360000+00:00;804;224232977;339748207;;E17;D01;E22;"WAC0029";"8100000000108";2023-12-31T23:00:00.0000000+00:00;"CREATEMP";"ANDET";;D02;8716867000030;;"KWH";;;;11;16;"00110048";0;0101;;;;E01;6595;Raccoon Alley;29;Raccoon City;;;DK;;;9999;607;;Anders And d. 29.;;Fætter Højben d. 29.;;;;Anders And d. 29.;;99990029;25698574;Kontaktmail@fiktiv.dk;;6595;Raccoon Alley;29;9999;Raccoon City;;;DK;;;;607;Anders And d. 29.;;99990001;99980001;Kontaktmail@fiktiv.dk;;6595;Raccoon Alley;29;9999;Raccoon City;;;DK;;;;607;
571313180401280327;2025-02-13T23:00:00.0000000+00:00;9999-12-31T23:59:59.9999999+00:00;2025-02-14T14:20:37.9360000+00:00;804;224232976;339913115;;E17;D01;E22;"3rka92dd";"8100000000108";2025-02-13T23:00:00.0000000+00:00;"MOVEINES";"ANDET";;D02;8716867000030;;"KWH";;;;11;16;"00110048";0;0101;;;;E01;6595;Raccoon Alley;29;Raccoon City;;;DK;;;9999;607;;Hasel Nielsen (JEM);3103523906;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
571313180401280327;2025-02-13T23:00:00.0000000+00:00;2025-02-14T23:00:00.0000000+00:00;2025-02-14T23:10:39.0140000+00:00;804;224233022;339913115;;E17;D01;E22;"3rka92dd";"8100000000108";2025-02-13T23:00:00.0000000+00:00;"MOVEINES";"ANDET";;D02;8716867000030;;"KWH";;;;11;16;"00110048";0;0101;;;;E01;6595;Raccoon Alley;29;Raccoon City;;;DK;;;9999;607;;Hasel Nielsen (JEM);3103523906;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
571313180401280327;2025-02-14T23:00:00.0000000+00:00;9999-12-31T23:59:59.9999999+00:00;2025-02-14T23:10:39.0140000+00:00;804;224233013;339913119;;E17;D01;E22;"3rka92dd";"8100000000115";2025-02-14T23:00:00.0000000+00:00;"CHANGESUP";"ANDET";;D02;8716867000030;;"KWH";;;;11;16;"00110048";0;0101;;;;E01;6595;Raccoon Alley;29;Raccoon City;;;DK;;;9999;607;;Hasel Nielsen (JEM);3103523906;;;;True;Hasel Nielsen;True;23456789;;xx@xx.dk;;;Raccoon Alley;111;9999;Raccoon City;;;DK;;;;;Hasel Nielsen;True;23456789;;xx@xx.dk;;;Raccoon Alley;111;9999;Raccoon City;;;DK;;;;;
`;
          }
          const inputString = inputTextArea.value;
          ipcRenderer
            .invoke("run-console-app", inputString)
            .then((output) => {
              document.getElementById("output-textarea").value = output;
            })
            .catch((err) => {
              document.getElementById("output-textarea").value =
                "Error running app.";
            });
        } else if (e.key === "F10") {
          event.preventDefault();
          changeSize(false);
        } else if (e.key === "F11") {
          event.preventDefault();
          changeSize(true);
        }
      });
    </script>
  </body>
</html>
